filters:: {"索引" false}
title:: 网络与信息安全基础知识/Internet及应用/Internet地址
alias:: Internet地址

- ## 域名
	- 域名（Domain Name）通常是用户所在的主机名字或地址。通常情况，一个完整、通用的层次型主机域名由如下4部分组成：
	  ```
	  计算机主机名.本地名.组名.最高层域名
	  ```
	- 从右到左，子域名分别表示不同的国家或地区的名称（只有美国可以省略表示国家的顶级域名）、组织类型、组织名称、分组织名称和计算机名称等。域名地址的最后一部分子域名称为高层域名（或顶级域名），它大致上可以分成两类：一类是组织性顶级域名（net，com）；另一类是地理性顶级域名（cn，jp）
- ## IP地址
	- Internet中的地址可分为5类：其中全0代表的是网络，全1代表的是广播
	  ![image.png](../assets/image_1649203337852_0.png){:height 278, :width 293}
		- A类网络地址第一个字节的十进制值为==000\~127==。
		- B类网络地址第一个字节的十进制值为==128\~191==。
		- C类网络地址第一个字节的十进制值为==192\~223==。
		- D类网络地址第一个字节的十进制值为==224\~239==。
		- E类网络地址第一个字节的十进制值为==240\~255==。
	- 私网地址
		- A类地址：10.0.0.0～10.255.255.255
		- B类地址：172.16.0.0 ～172.31.255.255
		- C类地址：192.168.0.0～192.168.255.255
	- 网络软件和路由器使用**子网掩码**（Subnet Mask）来识别报文是仅存放在网络内部还是被路由转发到其他地方。在一个字段内，1的出现表明一个字段包含所有或部分网络地址，0表明主机地址位置。例如，最常用的C类地址使用前三个8位来识别网络，最后一个8位识别主机。因此，子网掩码是255.255.255.0。
	- 子网地址掩码是==相对特别的IP地址而言的==，如果脱离了IP地址就毫无意义。它的出现一般是跟着一个特定的IP地址，用来为计算这个IP地址中的网络号部分和主机号部分提供依据。换句话说，就是在写一个IP地址后，再指明哪些是网络号部分，哪些是主机号部分。子网掩码的格式与IP地址相同，所有对应网络号的部分用1填上，所有对应主机号的部分用0填上。
	  ![image.png](../assets/image_1649203390711_0.png){:height 127, :width 642}
	- 假设一个组织有几个相对大的的子网，每个子网包括了25台左右的计算机；而又有一些相对较小的子网，每个子网大概只有几台计算机。这种情况下，可以将一个C类地址分成6个子网（每个子网可以包含30台计算机），这样解决了很大的问题。但是出现了一个新的情况，那就是大的子网基本上完全利用了IP地址范围，但是小的子网却造成了许多IP地址的浪费。为了解决这个新的难题，避免任何的IP浪费，就出现了允许应用不同大小的子网掩码来对IP地址空间进行子网划分的解决方案。这种新的方案就叫做**可变长子网掩码**（VLSM）。
	- VLSM用一个十分直观的方法来表示，那就是在IP地址后面加上“/网络号及子网络号编址位数”。例如，193.168.125.0/27就表示前27位表示网络号。
	- 现在的IP协议的版本号为4，所以也称之为IPv4，为了方便网络管理员阅读和理解，使用了4个十进制数中间加小数点“.”来表示。但随着因特网的膨胀，IPv4不论从地址空间上，还是协议的可用性上都无法满足因特网的新要求。这样出现一个新的IP协议IPv6，它使用了8个十六进制数中间加小数点“:”来表示。IPv6将原来的32位地址扩展成为==128位==地址，彻底解决了地址缺乏的问题。
	- TODO 路由汇聚：
- ## NAT技术
	- 因特网面临IP地址短缺的问题。解决这个问题有所谓长期的或短期的两种解决方案。长期的解决方案就是使用具有更大地址空间的IPv6协议，**网络地址翻译**（Network Address Translators，NAT）是许多短期的解决方案中的一种。
	- NAT技术最初提出的建议是在子网内部使用局部地址，而在子网外部使用少量的全局地址，通过路由器进行内部和外部地址的转换。NAT的实现主要有两种形式。
	- 第一种应用是**动态地址翻译**（Dynamic Address Translation）。为此，首先引入存根域的概念，所谓**存根域**（Stub Domain），就是内部网络的抽象，这样的网络只处理源和目标都在子网内部的通信。任何时候存根域内只有一部分主机要与外界通信，甚至还有许多主机可能从不与外界通信，所以整个存根域只需共享少量的全局IP地址。存根域有一个边界路由器，由它来处理域内与外部的通信。假定：
		- `m`：需要翻译的内部地址数，`n`：可用的全局地址数（NAT地址）
		- 当m：n翻译满足条件（m>=1 and m>=n）时，可以把一个大的地址空间映像到一个小的地址空间。所有NAT地址放在一个缓冲区中，并在存根域的边界路由器中建立一个局部地址和全局地址的动态映像表，如图5-16所示。这个图显示的是把所有B类网络138.201中的IP地址翻译成C类网络178.201.112中的IP地址。这种NAT地址重用有如下特点。
		- > 1. 只要缓冲区中存在尚未使用的C类地址，任何从内向外的连接请求都可以得到响应，并且在边界路由器的动态NAT表中为这建立一个映像表项。
		  > 2. 如果内部主机的映像存在，就可以利用它建立连接。
		  > 3. 从外部访问内部主机是有条件的，即动态NAT表中必须存在该主机的映像。
		- 动态地址翻译的好处是节约了全局适用的IP地址，而且不需要改变子网内部的任何配置，只需在边界路由器中设置一个动态地址变换表就可以工作了。
		  ![image.png](../assets/image_1649203470969_0.png){:height 316, :width 431}
	- 另外一种特殊的NAT应用是`m : 1`翻译，这种技术也叫做==伪装（masquerading）==，因为用一个路由器的IP地址可以把子网中所有主机的IP地址都隐藏起来。如果子网中有多个主机要同时通信，那么还要对端口号进行翻译，所以这种技术更经常被称为**网络地址和端口翻译**（Network Address Port Translation，NAPT）在很多NAPT实现中，专门保留一部分端口号给伪装使用，叫做伪装端口号。图5-17中的NAT路由器中有一个伪装表，通过这个表对端口号进行翻译，从而隐藏了内部网络138.201中的所有主机。可以看出，这种方法如下特点：
	  > 1. 出口分组的源地址被路由器的外部IP地址所代替，出口分组的源端口号被一个未使用的伪装端口号所代替。
	  > 2. 如果进来的分组的目标地址是本地路由器的IP地址，而且目标端口号是路由器的伪装端口号，则NAT路由器就检查该分组是否为当前的一个伪装会话，并试图通过它的伪装表对IP地址和端口号进行翻译。
		- 伪装技术可以作为一种安全手段使用，借以限制外部主机的访问。另外，还可以用这种技术实现虚拟主机和虚拟路由，以便达到负载均衡和提高可靠性的目的。
		- ![image.png](../assets/image_1649203545964_0.png){:height 276, :width 392}
- ## IPv6简介
	- IETF于1992年成立了IPNG（NP Next Generation）工作组；1994年夏，IPNG工作组提出了下一代IP网络协议（IP version 6，IPv6）的推荐版本；1995年夏，IPNG工作组完成了IPv6的协议文本；1995年——1999年完成了IETF要求的协议审定和测试；1999年成立了IPv6论坛，开始正式分配IPv6地址，IPv6的协议文本成为标准草案。
	- IPv6具有长达128位的地址空间，可以彻底解决IPv4地址不足的问题。由于IPv4地址是32位二进制，所能表示的IP地址个数为$$2^{32}=4 296 967 296 \~=40亿$$个，因而在因特网上约有40亿个IP地址。由32位的IPv4升级至128位的IPv6，因特网中的IP地址从理论上讲会有$$2^{128}=3.4 \times 10^{38}$$ 个，如果整个地球表面（包括陆地和水面）都覆盖着计算机，那么IPv6允许每平方米有 $$7 \times 10^{23}$$ 个IP地址，如果地址分配的速率是每秒分配100万个，则需要 $$10^{19}$$ 年的时间才能将所有地址分配完毕，可见，在想象得到的将来，IPv6的地址空间是不用完的。除此之外，IPv6还采用分组地址模式、高效IP包首部、服务质量、主机地址自动配置、认证和加密等许多技术。
	- ### IPv6数据包的格式
		- ![image.png](../assets/image_1649203577653_0.png){:height 252, :width 427}
		- ![image.png](../assets/image_1649203591289_0.png)
	- IPv6的地址表示:
		- > 1. 单播（unicast）：
		  > 2. 多播（multicast）：
		  > 3. 任播（anycast）：